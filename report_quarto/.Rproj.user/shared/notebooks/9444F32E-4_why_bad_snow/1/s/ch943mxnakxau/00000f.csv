"0","#| label: функции"
"0","#| warning: false"
"0",""
"0","read_files  <- function(x){"
"0","  read_excel(x) |> "
"0","    select(Local_time, Temp = T, Sn_description = `E'`, sss) |> "
"0","    mutate(Local_time = as_datetime(Local_time, format = ""%d.%m.%Y %R"")) |> "
"0","    mutate(Year = year(Local_time),"
"0","           Month = as.factor(month(Local_time)),"
"0","           Day = mday(Local_time)) |> "
"0","    filter(is.na(Temp) == F) |> "
"0","    mutate("
"0","      more_then_zero = Temp > 0, # логический столбец, параметр больше 0? (TRUE | FALSE)"
"0","      chng1 = cumsum(more_then_zero != lag(more_then_zero, def = first(more_then_zero)))"
"0","    ) |> "
"0","    group_by(Year, Month, Day) |> "
"0","    mutate(max_chng = max(chng1),"
"0","           min_chng = min(chng1),"
"0","           diff = max_chng-min_chng) |> "
"0","    summarise(Sn = mean(sss, na.rm = T),"
"0","              Sn_description = as.factor(str_flatten(Sn_description, "", "", na.rm = T)),"
"0","              Tavg = mean(Temp, na.rm = T),"
"0","              diff = max(diff))"
"0","}"
"0",""
"0","daily_temp <- function(x){"
"0","  read_excel(x) |> "
"0","    select(Local_time, Temp = T, Sn_description = `E'`, sss) |> "
"0","    mutate(Local_time = as_datetime(Local_time, format = ""%d.%m.%Y %R"")) |> "
"0","    mutate(Year = year(Local_time),"
"0","           Month = as.factor(month(Local_time)),"
"0","           Day = mday(Local_time)) |> "
"0","    filter(is.na(Temp) == F)"
"0","}"
